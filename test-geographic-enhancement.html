<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åœ°ç†ä¿¡æ¯å¢å¼ºåŠŸèƒ½æµ‹è¯•</title>
    <style>
        body {
            font-family: 'Microsoft YaHei', sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .test-section {
            background: #f5f5f5;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            border-left: 4px solid #409eff;
        }
        .code-block {
            background: #2d3748;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 6px;
            overflow-x: auto;
            font-family: 'Consolas', 'Monaco', monospace;
            margin: 10px 0;
        }
        .success {
            color: #67c23a;
            font-weight: bold;
        }
        .warning {
            color: #e6a23c;
            font-weight: bold;
        }
        .error {
            color: #f56c6c;
            font-weight: bold;
        }
        .step {
            margin: 15px 0;
            padding: 10px;
            background: white;
            border-radius: 4px;
            border: 1px solid #ddd;
        }
        .api-test {
            background: #f0f9ff;
            border: 1px solid #bfdbfe;
            padding: 15px;
            border-radius: 6px;
            margin: 10px 0;
        }
        .feature-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
            margin: 15px 0;
        }
        .feature-item {
            background: white;
            padding: 15px;
            border-radius: 6px;
            border: 1px solid #ddd;
        }
        .coordinate-display {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 4px;
            font-family: monospace;
            margin: 5px 0;
        }
    </style>
</head>
<body>
    <h1>åœ°ç†ä¿¡æ¯å¢å¼ºåŠŸèƒ½æµ‹è¯•</h1>
    
    <div class="test-section">
        <h2>åŠŸèƒ½æ¦‚è¿°</h2>
        <p>åœ°ç†ä¿¡æ¯å¢å¼ºæœåŠ¡ä¸“é—¨ç”¨äºä¸ºä»ç«å±±å¼•æ“è·å–çš„äº‹ä»¶è¡¥å……ç¼ºå¤±çš„ç»çº¬åº¦æ•°æ®ï¼Œç¡®ä¿æ—¶é—´çº¿ç”ŸæˆåŠŸèƒ½çš„å®Œæ•´æ€§ã€‚</p>
        
        <div class="feature-list">
            <div class="feature-item">
                <h4>ğŸŒ æ™ºèƒ½åœ°ç‚¹è¯†åˆ«</h4>
                <p>ä»äº‹ä»¶åœ°ç‚¹å­—æ®µå’Œæè¿°æ–‡æœ¬ä¸­æ™ºèƒ½æå–åœ°ç†ä½ç½®ä¿¡æ¯</p>
            </div>
            <div class="feature-item">
                <h4>ğŸ“ åæ ‡æ•°æ®åº“</h4>
                <p>å†…ç½®å…¨çƒä¸»è¦åŸå¸‚å’Œå›½å®¶çš„ç»çº¬åº¦åæ ‡æ•°æ®</p>
            </div>
            <div class="feature-item">
                <h4>ğŸ”„ æ‰¹é‡å¤„ç†</h4>
                <p>æ”¯æŒæ‰¹é‡ä¸ºç¼ºå°‘åæ ‡çš„äº‹ä»¶è¡¥å……åœ°ç†ä¿¡æ¯</p>
            </div>
            <div class="feature-item">
                <h4>ğŸ“Š ç»Ÿè®¡ç›‘æ§</h4>
                <p>æä¾›è¯¦ç»†çš„å¤„ç†ç»Ÿè®¡å’ŒæˆåŠŸç‡ç›‘æ§</p>
            </div>
        </div>
    </div>

    <div class="test-section">
        <h2>æ ¸å¿ƒç‰¹æ€§</h2>
        
        <div class="step">
            <h3>1. è‡ªåŠ¨æ£€æµ‹ç¼ºå¤±åæ ‡</h3>
            <p>ç³»ç»Ÿä¼šè‡ªåŠ¨æ£€æµ‹å“ªäº›äº‹ä»¶ç¼ºå°‘ç»çº¬åº¦ä¿¡æ¯ï¼š</p>
            <div class="code-block">
// æ£€æµ‹é€»è¾‘
public boolean needsGeographicEnhancement(Event event) {
    return event.getLatitude() == null || event.getLongitude() == null;
}
            </div>
        </div>

        <div class="step">
            <h3>2. æ™ºèƒ½åœ°ç‚¹æå–</h3>
            <p>ä»äº‹ä»¶æè¿°ä¸­æå–åœ°ç†ä½ç½®ä¿¡æ¯ï¼š</p>
            <div class="code-block">
// æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…
Pattern locationPattern = Pattern.compile(
    "(?:åœ¨|äº|ä½äº|å‘ç”Ÿåœ¨)\\s*([^ï¼Œ,ã€‚.\\s]{2,20}?)(?:[ï¼Œ,ã€‚.\\s]|$)"
);
            </div>
        </div>

        <div class="step">
            <h3>3. åæ ‡æ•°æ®æ˜ å°„</h3>
            <p>å†…ç½®ä¸»è¦åŸå¸‚å’Œå›½å®¶çš„åæ ‡æ•°æ®ï¼š</p>
            <div class="coordinate-display">
                åŒ—äº¬: [39.9042, 116.4074]<br>
                ä¸Šæµ·: [31.2304, 121.4737]<br>
                åç››é¡¿: [38.9072, -77.0369]<br>
                ä¼¦æ•¦: [51.5074, -0.1278]<br>
                ä¸œäº¬: [35.6762, 139.6503]<br>
                ...
            </div>
        </div>

        <div class="step">
            <h3>4. é›†æˆåˆ°æ—¶é—´çº¿ç”Ÿæˆ</h3>
            <p>åœ¨æ—¶é—´çº¿ç”Ÿæˆè¿‡ç¨‹ä¸­è‡ªåŠ¨è°ƒç”¨åœ°ç†ä¿¡æ¯å¢å¼ºï¼š</p>
            <div class="code-block">
// åœ¨EnhancedTimelineGenerationServiceImplä¸­
if (eventGeographicEnhancementService != null) {
    events = eventGeographicEnhancementService
        .enhanceEventDataListGeographicInfo(events);
}
            </div>
        </div>
    </div>

    <div class="test-section">
        <h2>APIæ¥å£æµ‹è¯•</h2>
        
        <div class="api-test">
            <h4>1. è·å–å¢å¼ºç»Ÿè®¡</h4>
            <p><strong>GET</strong> /api/geographic-enhancement/statistics</p>
            <div class="code-block">
curl -X GET "http://localhost:8080/api/geographic-enhancement/statistics"
            </div>
        </div>

        <div class="api-test">
            <h4>2. ä¸ºå•ä¸ªäº‹ä»¶å¢å¼ºåœ°ç†ä¿¡æ¯</h4>
            <p><strong>POST</strong> /api/geographic-enhancement/enhance-event/{eventId}</p>
            <div class="code-block">
curl -X POST "http://localhost:8080/api/geographic-enhancement/enhance-event/1"
            </div>
        </div>

        <div class="api-test">
            <h4>3. æ‰¹é‡å¢å¼ºç¼ºå¤±çš„åœ°ç†ä¿¡æ¯</h4>
            <p><strong>POST</strong> /api/geographic-enhancement/enhance-missing?limit=100</p>
            <div class="code-block">
curl -X POST "http://localhost:8080/api/geographic-enhancement/enhance-missing?limit=100"
            </div>
        </div>

        <div class="api-test">
            <h4>4. æ ¹æ®åœ°ç‚¹åç§°è·å–åæ ‡</h4>
            <p><strong>GET</strong> /api/geographic-enhancement/coordinates?locationName=åŒ—äº¬</p>
            <div class="code-block">
curl -X GET "http://localhost:8080/api/geographic-enhancement/coordinates?locationName=åŒ—äº¬"
            </div>
        </div>

        <div class="api-test">
            <h4>5. ä»æ–‡æœ¬ä¸­æå–åœ°ç‚¹ä¿¡æ¯</h4>
            <p><strong>POST</strong> /api/geographic-enhancement/extract-location</p>
            <div class="code-block">
curl -X POST "http://localhost:8080/api/geographic-enhancement/extract-location" \
  -H "Content-Type: application/json" \
  -d '{"text": "äº‹ä»¶å‘ç”Ÿåœ¨åŒ—äº¬å¸‚ä¸­å¿ƒåœ°åŒº"}'
            </div>
        </div>
    </div>

    <div class="test-section">
        <h2>æµ‹è¯•æ­¥éª¤</h2>
        <ol>
            <li><span class="success">å¯åŠ¨åç«¯æœåŠ¡</span>ï¼šç¡®ä¿Spring Bootåº”ç”¨æ­£å¸¸è¿è¡Œ</li>
            <li><span class="success">æ£€æŸ¥æœåŠ¡çŠ¶æ€</span>ï¼šè®¿é—®ç»Ÿè®¡æ¥å£ç¡®è®¤æœåŠ¡å¯ç”¨</li>
            <li><span class="success">æµ‹è¯•å•ä¸ªäº‹ä»¶å¢å¼º</span>ï¼šé€‰æ‹©ä¸€ä¸ªç¼ºå°‘åæ ‡çš„äº‹ä»¶è¿›è¡Œæµ‹è¯•</li>
            <li><span class="success">æµ‹è¯•æ‰¹é‡å¢å¼º</span>ï¼šè¿è¡Œæ‰¹é‡å¢å¼ºæ¥å£</li>
            <li><span class="success">éªŒè¯æ—¶é—´çº¿ç”Ÿæˆ</span>ï¼šåˆ›å»ºæ—¶é—´çº¿éªŒè¯åœ°ç†ä¿¡æ¯æ˜¯å¦æ­£ç¡®è¡¥å……</li>
            <li><span class="success">æ£€æŸ¥æ•°æ®åº“</span>ï¼šç¡®è®¤äº‹ä»¶è¡¨ä¸­çš„longitudeå’Œlatitudeå­—æ®µå·²æ›´æ–°</li>
        </ol>
    </div>

    <div class="test-section">
        <h2>éªŒè¯è¦ç‚¹</h2>
        <ul>
            <li><span class="success">âœ“</span> ç¼ºå°‘ç»çº¬åº¦çš„äº‹ä»¶èƒ½å¤Ÿè‡ªåŠ¨è¡¥å……åæ ‡</li>
            <li><span class="success">âœ“</span> åœ°ç‚¹åç§°èƒ½å¤Ÿæ­£ç¡®æ˜ å°„åˆ°åæ ‡</li>
            <li><span class="success">âœ“</span> ä»äº‹ä»¶æè¿°ä¸­èƒ½å¤Ÿæå–åœ°ç‚¹ä¿¡æ¯</li>
            <li><span class="success">âœ“</span> æ‰¹é‡å¤„ç†åŠŸèƒ½æ­£å¸¸å·¥ä½œ</li>
            <li><span class="success">âœ“</span> ç»Ÿè®¡ä¿¡æ¯å‡†ç¡®åæ˜ å¤„ç†ç»“æœ</li>
            <li><span class="success">âœ“</span> æ—¶é—´çº¿ç”ŸæˆåŒ…å«å®Œæ•´çš„åœ°ç†ä¿¡æ¯</li>
        </ul>
    </div>

    <div class="test-section">
        <h2>æ•°æ®åº“éªŒè¯</h2>
        <p>æ£€æŸ¥äº‹ä»¶è¡¨ä¸­çš„åœ°ç†ä¿¡æ¯å­—æ®µï¼š</p>
        <div class="code-block">
-- æŸ¥è¯¢ç¼ºå°‘åœ°ç†ä¿¡æ¯çš„äº‹ä»¶
SELECT id, event_location, latitude, longitude, geographic_status 
FROM event 
WHERE latitude IS NULL OR longitude IS NULL;

-- æŸ¥è¯¢å·²å¢å¼ºåœ°ç†ä¿¡æ¯çš„äº‹ä»¶
SELECT id, event_location, latitude, longitude, geographic_status, geographic_updated_at
FROM event 
WHERE geographic_status = 1 
ORDER BY geographic_updated_at DESC 
LIMIT 10;
        </div>
    </div>

    <div class="test-section">
        <h2>æ€§èƒ½ç›‘æ§</h2>
        <p>ç›‘æ§åœ°ç†ä¿¡æ¯å¢å¼ºçš„æ€§èƒ½æŒ‡æ ‡ï¼š</p>
        <ul>
            <li><span class="warning">å¤„ç†é€Ÿåº¦</span>ï¼šæ¯ç§’å¤„ç†çš„äº‹ä»¶æ•°é‡</li>
            <li><span class="warning">æˆåŠŸç‡</span>ï¼šæˆåŠŸè·å–åæ ‡çš„äº‹ä»¶æ¯”ä¾‹</li>
            <li><span class="warning">ç¼“å­˜å‘½ä¸­ç‡</span>ï¼šåæ ‡æŸ¥è¯¢çš„ç¼“å­˜æ•ˆç‡</li>
            <li><span class="warning">é”™è¯¯ç‡</span>ï¼šå¤„ç†å¤±è´¥çš„äº‹ä»¶æ¯”ä¾‹</li>
        </ul>
    </div>

    <div class="test-section">
        <h2>æ•…éšœæ’é™¤</h2>
        <div class="step">
            <h3>å¸¸è§é—®é¢˜</h3>
            <ul>
                <li><span class="error">åæ ‡æœªæ‰¾åˆ°</span>ï¼šæ£€æŸ¥åœ°ç‚¹åç§°æ˜¯å¦åœ¨åæ ‡æ•°æ®åº“ä¸­</li>
                <li><span class="error">åœ°ç‚¹æå–å¤±è´¥</span>ï¼šæ£€æŸ¥äº‹ä»¶æè¿°çš„æ ¼å¼æ˜¯å¦ç¬¦åˆæ­£åˆ™è¡¨è¾¾å¼</li>
                <li><span class="error">æ‰¹é‡å¤„ç†ç¼“æ…¢</span>ï¼šè€ƒè™‘è°ƒæ•´æ‰¹é‡å¤„ç†çš„æ•°é‡é™åˆ¶</li>
                <li><span class="error">æ•°æ®åº“æ›´æ–°å¤±è´¥</span>ï¼šæ£€æŸ¥æ•°æ®åº“è¿æ¥å’Œäº‹åŠ¡é…ç½®</li>
            </ul>
        </div>

        <div class="step">
            <h3>æ—¥å¿—æ£€æŸ¥</h3>
            <p>å…³é”®æ—¥å¿—ä¿¡æ¯ï¼š</p>
            <div class="code-block">
# æŸ¥çœ‹åœ°ç†ä¿¡æ¯å¢å¼ºæ—¥å¿—
grep "EventGeographicEnhancementService" logs/application.log

# æŸ¥çœ‹å¤„ç†ç»Ÿè®¡
grep "åœ°ç†ä¿¡æ¯å¢å¼ºç»Ÿè®¡" logs/application.log
            </div>
        </div>
    </div>

    <script>
        console.log('åœ°ç†ä¿¡æ¯å¢å¼ºåŠŸèƒ½æµ‹è¯•é¡µé¢å·²åŠ è½½');
        console.log('è¯·æŒ‰ç…§æµ‹è¯•æ­¥éª¤éªŒè¯åŠŸèƒ½');
        
        // æ˜¾ç¤ºå½“å‰æ—¶é—´
        document.addEventListener('DOMContentLoaded', function() {
            console.log('æµ‹è¯•å¼€å§‹æ—¶é—´:', new Date().toLocaleString());
        });
    </script>
</body>
</html>