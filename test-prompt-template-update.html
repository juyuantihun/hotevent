<!DOCTYPE html>\n<html lang=\"zh-CN\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>æç¤ºè¯æ¨¡æ¿æ›´æ–°æµ‹è¯•</title>\n    <style>\n        body {\n            font-family: 'Microsoft YaHei', sans-serif;\n            max-width: 1000px;\n            margin: 0 auto;\n            padding: 20px;\n            line-height: 1.6;\n            background: #f8f9fa;\n        }\n        .header {\n            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n            color: white;\n            padding: 30px;\n            border-radius: 12px;\n            text-align: center;\n            margin-bottom: 30px;\n        }\n        .test-section {\n            background: white;\n            padding: 25px;\n            margin: 20px 0;\n            border-radius: 10px;\n            box-shadow: 0 2px 10px rgba(0,0,0,0.1);\n            border-left: 5px solid #409eff;\n        }\n        .api-test {\n            background: #f8f9fa;\n            padding: 20px;\n            border-radius: 8px;\n            margin: 15px 0;\n            border: 1px solid #dee2e6;\n        }\n        .code-block {\n            background: #2d3748;\n            color: #e2e8f0;\n            padding: 20px;\n            border-radius: 8px;\n            overflow-x: auto;\n            font-family: 'Consolas', 'Monaco', monospace;\n            margin: 15px 0;\n            font-size: 14px;\n        }\n        .success {\n            color: #67c23a;\n            font-weight: bold;\n        }\n        .warning {\n            color: #e6a23c;\n            font-weight: bold;\n        }\n        .error {\n            color: #f56c6c;\n            font-weight: bold;\n        }\n        .info {\n            color: #409eff;\n            font-weight: bold;\n        }\n        .highlight {\n            background: #fff3cd;\n            padding: 3px 6px;\n            border-radius: 4px;\n            font-weight: bold;\n            color: #856404;\n        }\n        .step {\n            background: #e8f5e8;\n            padding: 15px;\n            margin: 10px 0;\n            border-radius: 6px;\n            border-left: 4px solid #28a745;\n        }\n        .button {\n            background: #409eff;\n            color: white;\n            padding: 10px 20px;\n            border: none;\n            border-radius: 6px;\n            cursor: pointer;\n            margin: 5px;\n            font-size: 14px;\n        }\n        .button:hover {\n            background: #337ab7;\n        }\n        .result-area {\n            background: #f8f9fa;\n            padding: 15px;\n            border-radius: 6px;\n            margin: 10px 0;\n            min-height: 100px;\n            border: 1px solid #dee2e6;\n            font-family: monospace;\n            white-space: pre-wrap;\n        }\n    </style>\n</head>\n<body>\n    <div class=\"header\">\n        <h1>ğŸ“ æç¤ºè¯æ¨¡æ¿æ›´æ–°æµ‹è¯•</h1>\n        <p>ç¡®ä¿æç¤ºè¯æ¨¡æ¿åŒ…å«ç»çº¬åº¦è¦æ±‚çš„å®Œæ•´æµ‹è¯•</p>\n    </div>\n\n    <div class=\"test-section\">\n        <h2>ğŸ¯ é—®é¢˜è¯Šæ–­</h2>\n        <p>æ ¹æ®æ—¥å¿—åˆ†æï¼Œå‘ç°æç¤ºè¯ä¸­ç¼ºå°‘ç»çº¬åº¦è¦æ±‚ï¼š</p>\n        <div class=\"code-block\">\n2025-08-04 16:43:19 [http-nio-8080-exec-10] INFO  c.h.e.s.i.EnhancedApiCallManagerImpl - æç¤ºè¯å†…å®¹: \n=== æ—¶é—´çº¿ç”Ÿæˆä»»åŠ¡ ===\næ—¶é—´çº¿åç§°ï¼šä¿„ä¹Œå†²çª6æœˆæ—¶é—´çº¿_segment_0_20250601_20250630\n...\n=== è¾“å‡ºæ ¼å¼è¦æ±‚ ===\nè¯·è¿”å›JSONæ ¼å¼çš„äº‹ä»¶åˆ—è¡¨ï¼Œæ¯ä¸ªäº‹ä»¶å¿…é¡»åŒ…å«ä»¥ä¸‹å­—æ®µï¼š\n- id: äº‹ä»¶å”¯ä¸€æ ‡è¯†\n- title: äº‹ä»¶æ ‡é¢˜ï¼ˆç®€æ´æ˜äº†ï¼‰\n- description: äº‹ä»¶è¯¦ç»†æè¿°\n- eventTime: äº‹ä»¶å‘ç”Ÿæ—¶é—´ï¼ˆISOæ ¼å¼ï¼‰\n- location: äº‹ä»¶å‘ç”Ÿåœ°ç‚¹ï¼ˆå…·ä½“åœ°åï¼‰\n- subject: äº‹ä»¶ä¸»ä½“ï¼ˆäººç‰©ã€ç»„ç»‡ç­‰ï¼‰\n- object: äº‹ä»¶å®¢ä½“ï¼ˆå—å½±å“å¯¹è±¡ï¼‰\n- eventType: äº‹ä»¶ç±»å‹ï¼ˆæ”¿æ²»ã€ç»æµã€ç¤¾ä¼šã€ç§‘æŠ€ç­‰ï¼‰\n- keywords: å…³é”®è¯åˆ—è¡¨\n- sources: ä¿¡æ¯æ¥æºåˆ—è¡¨\n- credibilityScore: å¯ä¿¡åº¦è¯„åˆ†ï¼ˆ0.0-1.0ï¼‰\n\n<span class=\"highlight\">âŒ ç¼ºå°‘ latitude å’Œ longitude å­—æ®µè¦æ±‚</span>\n        </div>\n    </div>\n\n    <div class=\"test-section\">\n        <h2>ğŸ”§ è§£å†³æ–¹æ¡ˆ</h2>\n        <p>æˆ‘ä»¬éœ€è¦æ›´æ–°æ•°æ®åº“ä¸­çš„æç¤ºè¯æ¨¡æ¿ï¼Œç¡®ä¿åŒ…å«ç»çº¬åº¦è¦æ±‚ã€‚</p>\n        \n        <div class=\"step\">\n            <h4>æ­¥éª¤ 1: æ£€æŸ¥å½“å‰æ¨¡æ¿çŠ¶æ€</h4>\n            <button class=\"button\" onclick=\"checkTemplateStatus()\">æ£€æŸ¥æ¨¡æ¿çŠ¶æ€</button>\n            <div id=\"checkResult\" class=\"result-area\">ç‚¹å‡»æŒ‰é’®æ£€æŸ¥å½“å‰æ¨¡æ¿çŠ¶æ€...</div>\n        </div>\n        \n        <div class=\"step\">\n            <h4>æ­¥éª¤ 2: æ›´æ–°æ¨¡æ¿åŒ…å«åæ ‡è¦æ±‚</h4>\n            <button class=\"button\" onclick=\"updateTemplate()\">æ›´æ–°æ¨¡æ¿</button>\n            <div id=\"updateResult\" class=\"result-area\">ç‚¹å‡»æŒ‰é’®æ›´æ–°æ¨¡æ¿...</div>\n        </div>\n        \n        <div class=\"step\">\n            <h4>æ­¥éª¤ 3: éªŒè¯æ›´æ–°ç»“æœ</h4>\n            <button class=\"button\" onclick=\"verifyUpdate()\">éªŒè¯æ›´æ–°</button>\n            <div id=\"verifyResult\" class=\"result-area\">ç‚¹å‡»æŒ‰é’®éªŒè¯æ›´æ–°ç»“æœ...</div>\n        </div>\n        \n        <div class=\"step\">\n            <h4>æ­¥éª¤ 4: é‡æ–°åŠ è½½æ¨¡æ¿ç¼“å­˜</h4>\n            <button class=\"button\" onclick=\"reloadCache()\">é‡æ–°åŠ è½½ç¼“å­˜</button>\n            <div id=\"reloadResult\" class=\"result-area\">ç‚¹å‡»æŒ‰é’®é‡æ–°åŠ è½½æ¨¡æ¿ç¼“å­˜...</div>\n        </div>\n    </div>\n\n    <div class=\"test-section\">\n        <h2>ğŸ“‹ API æµ‹è¯•ç«¯ç‚¹</h2>\n        \n        <div class=\"api-test\">\n            <h4>1. æ£€æŸ¥æ¨¡æ¿åæ ‡çŠ¶æ€</h4>\n            <div class=\"code-block\">\nGET http://localhost:8080/api/prompt-template/check-coordinates\n            </div>\n            <p>è¿”å›æ‰€æœ‰æ¿€æ´»æ¨¡æ¿çš„åæ ‡è¦æ±‚çŠ¶æ€</p>\n        </div>\n        \n        <div class=\"api-test\">\n            <h4>2. æ›´æ–°æ¨¡æ¿åŒ…å«åæ ‡</h4>\n            <div class=\"code-block\">\nPOST http://localhost:8080/api/prompt-template/update-coordinates\n            </div>\n            <p>åˆ›å»ºåŒ…å«ç»çº¬åº¦è¦æ±‚çš„æ–°æ¨¡æ¿</p>\n        </div>\n        \n        <div class=\"api-test\">\n            <h4>3. è·å–æ¿€æ´»æ¨¡æ¿</h4>\n            <div class=\"code-block\">\nGET http://localhost:8080/api/prompt-template/active\n            </div>\n            <p>è·å–æ‰€æœ‰æ¿€æ´»çš„æ¨¡æ¿åˆ—è¡¨</p>\n        </div>\n        \n        <div class=\"api-test\">\n            <h4>4. é‡æ–°åŠ è½½æ¨¡æ¿ç¼“å­˜</h4>\n            <div class=\"code-block\">\nPOST http://localhost:8080/api/prompt-template/reload\n            </div>\n            <p>é‡æ–°åŠ è½½æ¨¡æ¿ç¼“å­˜ï¼Œä½¿æ›´æ–°ç”Ÿæ•ˆ</p>\n        </div>\n    </div>\n\n    <div class=\"test-section\">\n        <h2>ğŸ§ª æ‰‹åŠ¨æµ‹è¯•æ­¥éª¤</h2>\n        \n        <h3>ä½¿ç”¨ curl å‘½ä»¤æµ‹è¯•</h3>\n        <div class=\"code-block\">\n# 1. æ£€æŸ¥å½“å‰æ¨¡æ¿çŠ¶æ€\ncurl -X GET \"http://localhost:8080/api/prompt-template/check-coordinates\"\n\n# 2. æ›´æ–°æ¨¡æ¿åŒ…å«åæ ‡è¦æ±‚\ncurl -X POST \"http://localhost:8080/api/prompt-template/update-coordinates\"\n\n# 3. é‡æ–°åŠ è½½æ¨¡æ¿ç¼“å­˜\ncurl -X POST \"http://localhost:8080/api/prompt-template/reload\"\n\n# 4. éªŒè¯æ›´æ–°ç»“æœ\ncurl -X GET \"http://localhost:8080/api/prompt-template/check-coordinates\"\n\n# 5. è·å–äº‹ä»¶æ£€ç´¢æ¨¡æ¿å†…å®¹\ncurl -X GET \"http://localhost:8080/api/prompt-template/active/event_fetch\"\n        </div>\n        \n        <h3>ä½¿ç”¨ Postman æµ‹è¯•</h3>\n        <ol>\n            <li>å¯¼å…¥ä¸Šè¿° API ç«¯ç‚¹åˆ° Postman</li>\n            <li>è®¾ç½® Base URL: <code>http://localhost:8080</code></li>\n            <li>æŒ‰é¡ºåºæ‰§è¡Œæµ‹è¯•è¯·æ±‚</li>\n            <li>æ£€æŸ¥å“åº”ç»“æœç¡®è®¤æ›´æ–°æˆåŠŸ</li>\n        </ol>\n    </div>\n\n    <div class=\"test-section\">\n        <h2>âœ… é¢„æœŸç»“æœ</h2>\n        \n        <h3>æ›´æ–°å‰çš„æ¨¡æ¿ï¼ˆç¼ºå°‘åæ ‡ï¼‰</h3>\n        <div class=\"code-block\">\n=== è¾“å‡ºæ ¼å¼è¦æ±‚ ===\nè¯·è¿”å›JSONæ ¼å¼çš„äº‹ä»¶åˆ—è¡¨ï¼Œæ¯ä¸ªäº‹ä»¶å¿…é¡»åŒ…å«ä»¥ä¸‹å­—æ®µï¼š\n- id: äº‹ä»¶å”¯ä¸€æ ‡è¯†\n- title: äº‹ä»¶æ ‡é¢˜ï¼ˆç®€æ´æ˜äº†ï¼‰\n- description: äº‹ä»¶è¯¦ç»†æè¿°\n- eventTime: äº‹ä»¶å‘ç”Ÿæ—¶é—´ï¼ˆISOæ ¼å¼ï¼‰\n- location: äº‹ä»¶å‘ç”Ÿåœ°ç‚¹ï¼ˆå…·ä½“åœ°åï¼‰\n- subject: äº‹ä»¶ä¸»ä½“ï¼ˆäººç‰©ã€ç»„ç»‡ç­‰ï¼‰\n- object: äº‹ä»¶å®¢ä½“ï¼ˆå—å½±å“å¯¹è±¡ï¼‰\n- eventType: äº‹ä»¶ç±»å‹ï¼ˆæ”¿æ²»ã€ç»æµã€ç¤¾ä¼šã€ç§‘æŠ€ç­‰ï¼‰\n- keywords: å…³é”®è¯åˆ—è¡¨\n- sources: ä¿¡æ¯æ¥æºåˆ—è¡¨\n- credibilityScore: å¯ä¿¡åº¦è¯„åˆ†ï¼ˆ0.0-1.0ï¼‰\n        </div>\n        \n        <h3>æ›´æ–°åçš„æ¨¡æ¿ï¼ˆåŒ…å«åæ ‡ï¼‰</h3>\n        <div class=\"code-block\">\n=== è¾“å‡ºæ ¼å¼è¦æ±‚ ===\nè¯·è¿”å›JSONæ ¼å¼çš„äº‹ä»¶åˆ—è¡¨ï¼Œæ¯ä¸ªäº‹ä»¶å¿…é¡»åŒ…å«ä»¥ä¸‹å­—æ®µï¼š\n- id: äº‹ä»¶å”¯ä¸€æ ‡è¯†\n- title: äº‹ä»¶æ ‡é¢˜ï¼ˆç®€æ´æ˜äº†ï¼‰\n- description: äº‹ä»¶è¯¦ç»†æè¿°\n- eventTime: äº‹ä»¶å‘ç”Ÿæ—¶é—´ï¼ˆISOæ ¼å¼ï¼‰\n- location: äº‹ä»¶å‘ç”Ÿåœ°ç‚¹ï¼ˆå…·ä½“åœ°åï¼‰\n<span class=\"highlight\">- latitude: äº‹ä»¶å‘ç”Ÿåœ°ç‚¹çš„çº¬åº¦ï¼ˆæ•°å€¼æ ¼å¼ï¼Œå¦‚ï¼š39.9042ï¼‰</span>\n<span class=\"highlight\">- longitude: äº‹ä»¶å‘ç”Ÿåœ°ç‚¹çš„ç»åº¦ï¼ˆæ•°å€¼æ ¼å¼ï¼Œå¦‚ï¼š116.4074ï¼‰</span>\n- subject: äº‹ä»¶ä¸»ä½“ï¼ˆäººç‰©ã€ç»„ç»‡ç­‰ï¼‰\n- object: äº‹ä»¶å®¢ä½“ï¼ˆå—å½±å“å¯¹è±¡ï¼‰\n- eventType: äº‹ä»¶ç±»å‹ï¼ˆæ”¿æ²»ã€ç»æµã€ç¤¾ä¼šã€ç§‘æŠ€ç­‰ï¼‰\n- keywords: å…³é”®è¯åˆ—è¡¨\n- sources: ä¿¡æ¯æ¥æºåˆ—è¡¨\n- credibilityScore: å¯ä¿¡åº¦è¯„åˆ†ï¼ˆ0.0-1.0ï¼‰\n\n=== é‡è¦è¦æ±‚ ===\n<span class=\"highlight\">1. **å¿…é¡»æä¾›å‡†ç¡®çš„ç»çº¬åº¦åæ ‡**ï¼šæ¯ä¸ªäº‹ä»¶éƒ½å¿…é¡»åŒ…å«latitudeå’Œlongitudeå­—æ®µ</span>\n<span class=\"highlight\">2. ç»çº¬åº¦å¿…é¡»æ˜¯æ•°å€¼æ ¼å¼ï¼ˆå¦‚ï¼š39.9042ï¼‰ï¼Œä¸èƒ½æ˜¯å­—ç¬¦ä¸²</span>\n<span class=\"highlight\">3. å¦‚æœæ— æ³•ç¡®å®šç²¾ç¡®åæ ‡ï¼Œè¯·æä¾›è¯¥åœ°åŒºçš„ä¸­å¿ƒåæ ‡æˆ–ä¸»è¦åŸå¸‚åæ ‡</span>\n        </div>\n    </div>\n\n    <div class=\"test-section\">\n        <h2>ğŸ” éªŒè¯æ£€æŸ¥æ¸…å•</h2>\n        <ul>\n            <li>â˜ æ¨¡æ¿æ›´æ–° API è°ƒç”¨æˆåŠŸ</li>\n            <li>â˜ æ–°æ¨¡æ¿åŒ…å« latitude å’Œ longitude å­—æ®µè¦æ±‚</li>\n            <li>â˜ æ¨¡æ¿ç¼“å­˜é‡æ–°åŠ è½½æˆåŠŸ</li>\n            <li>â˜ æ£€æŸ¥çŠ¶æ€ API æ˜¾ç¤ºæ¨¡æ¿åŒ…å«åæ ‡è¦æ±‚</li>\n            <li>â˜ åˆ›å»ºæ–°æ—¶é—´çº¿æ—¶ä½¿ç”¨æ›´æ–°åçš„æ¨¡æ¿</li>\n            <li>â˜ API å“åº”åŒ…å«ç»çº¬åº¦æ•°æ®</li>\n            <li>â˜ æ•°æ®åº“ä¸­æ–°äº‹ä»¶åŒ…å«åæ ‡ä¿¡æ¯</li>\n        </ul>\n    </div>\n\n    <div class=\"test-section\">\n        <h2>ğŸš¨ æ•…éšœæ’é™¤</h2>\n        \n        <h3>å¦‚æœæ¨¡æ¿æ›´æ–°å¤±è´¥</h3>\n        <ul>\n            <li>æ£€æŸ¥åº”ç”¨æ˜¯å¦æ­£å¸¸è¿è¡Œ</li>\n            <li>ç¡®è®¤æ•°æ®åº“è¿æ¥æ­£å¸¸</li>\n            <li>æŸ¥çœ‹åº”ç”¨æ—¥å¿—ä¸­çš„é”™è¯¯ä¿¡æ¯</li>\n            <li>å°è¯•æ‰‹åŠ¨æ‰§è¡Œ SQL æ›´æ–°è¯­å¥</li>\n        </ul>\n        \n        <h3>å¦‚æœç¼“å­˜æœªæ›´æ–°</h3>\n        <ul>\n            <li>è°ƒç”¨é‡æ–°åŠ è½½ç¼“å­˜ API</li>\n            <li>é‡å¯åº”ç”¨æœåŠ¡</li>\n            <li>æ£€æŸ¥æ¨¡æ¿æœåŠ¡çš„ç¼“å­˜æœºåˆ¶</li>\n        </ul>\n        \n        <h3>å¦‚æœä»ç„¶æ²¡æœ‰åæ ‡</h3>\n        <ul>\n            <li>ç¡®è®¤ä½¿ç”¨çš„æ˜¯æ›´æ–°åçš„æ¨¡æ¿</li>\n            <li>æ£€æŸ¥äº‹ä»¶è§£æé€»è¾‘æ˜¯å¦æ­£ç¡®</li>\n            <li>éªŒè¯ API å“åº”æ ¼å¼</li>\n            <li>æŸ¥çœ‹è¯¦ç»†çš„è°ƒè¯•æ—¥å¿—</li>\n        </ul>\n    </div>\n\n    <script>\n        const baseUrl = 'http://localhost:8080';\n        \n        async function makeRequest(url, method = 'GET') {\n            try {\n                const response = await fetch(url, {\n                    method: method,\n                    headers: {\n                        'Content-Type': 'application/json'\n                    }\n                });\n                \n                if (!response.ok) {\n                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n                }\n                \n                const data = await response.json();\n                return JSON.stringify(data, null, 2);\n            } catch (error) {\n                return `é”™è¯¯: ${error.message}`;\n            }\n        }\n        \n        async function checkTemplateStatus() {\n            const result = document.getElementById('checkResult');\n            result.textContent = 'æ­£åœ¨æ£€æŸ¥æ¨¡æ¿çŠ¶æ€...';\n            \n            const response = await makeRequest(`${baseUrl}/api/prompt-template/check-coordinates`);\n            result.textContent = response;\n        }\n        \n        async function updateTemplate() {\n            const result = document.getElementById('updateResult');\n            result.textContent = 'æ­£åœ¨æ›´æ–°æ¨¡æ¿...';\n            \n            const response = await makeRequest(`${baseUrl}/api/prompt-template/update-coordinates`, 'POST');\n            result.textContent = response;\n        }\n        \n        async function verifyUpdate() {\n            const result = document.getElementById('verifyResult');\n            result.textContent = 'æ­£åœ¨éªŒè¯æ›´æ–°ç»“æœ...';\n            \n            const response = await makeRequest(`${baseUrl}/api/prompt-template/check-coordinates`);\n            result.textContent = response;\n        }\n        \n        async function reloadCache() {\n            const result = document.getElementById('reloadResult');\n            result.textContent = 'æ­£åœ¨é‡æ–°åŠ è½½ç¼“å­˜...';\n            \n            const response = await makeRequest(`${baseUrl}/api/prompt-template/reload`, 'POST');\n            result.textContent = response;\n        }\n        \n        // é¡µé¢åŠ è½½æ—¶çš„æç¤º\n        console.log('ğŸ“ æç¤ºè¯æ¨¡æ¿æ›´æ–°æµ‹è¯•é¡µé¢å·²åŠ è½½');\n        console.log('ğŸ¯ è¯·ç¡®ä¿åº”ç”¨æœåŠ¡æ­£åœ¨è¿è¡Œåœ¨ http://localhost:8080');\n        console.log('ğŸ”§ æŒ‰ç…§æ­¥éª¤ä¾æ¬¡æ‰§è¡Œæµ‹è¯•');\n    </script>\n</body>\n</html>"
}
</invoke>