<templ>;
}
<weight: 500px;
  font-e: 16
  font-sizpx;n-bottom: 12 {
  margirics h4-metce
.performan
 20px;
}n-top:s {
  margi-metricce.performan
}

g: 12px 0;in  padd-panel {
nitor;
}

.moding: 12px 0l {
  padns-panetio

.acd;
}break-worreak: ord-b
  we-wrap;-space: pr white;
  0rgin:  maer pre {
viewstate-

.
}low: auto;px;
  overft: 400x-heighpx;
  mading: 12;
  pad4px-radius: derf7fa;
  bor-color: #f5ckgroundwer {
  bavie}

.state-tom: 16px;
n-bot margitor {
 lecstore-se8px;
}

. gap: y: flex;
 
  displas {ionder-acthea
}

.er; centlign-items:en;
  abetwee-tent: spactify-conflex;
  jus: ay{
  displder ard-hea
}

.c 20px;n-bottom:rgid {
  maarager__c-man
.store3133;
}
lor: #30co 600;
  t-weight:x;
  fone: 18p
  font-siz;tom: 16pxbotmargin-tle {
  nager__timare-
}

.sto20px;gin: arr {
  mstore-manage
.yle scoped><st

cript></s
})
10y.size || .quer= eventStore.size uery1
  eventQt || urrentore.query.ct = eventSQuery.curren数
  event化事件查询参
  // 初始> {ed(() =nMount// 初始化
o
}

alse
  }ng.value = f
    isLoadiy {} finall失败')
  ror('更新应用设置age.er   ElMess
 败:', error)应用设置失('更新ror  console.er {
  error)
  } catch ()已更新'ess('应用设置essage.succ   
    ElM
 on), durati置'用设ceMetric('应rforman  addPe  Time
    
() - startormance.nowperf = onurati
    const d)
      }oring
  itormanceMonerfngs.enablePttiSe: appeMonitoringerformanc    enableP  ation,
leAnims.enabappSettingAnimation: enable
      ig({Conftore.update配置
    appS 更新  // 
  Type)
   Themee as hemgs.ttinppSetetTheme(are.s   appSto题
 // 设置主
    
    ance.now()rmerfo partTime = const st   
  try {

  ue = trvalueading.{
  isLo () => s =SettingAppconst apply应用相关操作


// }false
  }
= lue g.va   isLoadin{
  finally ')
  }r('获取事件客体失败ge.erro   ElMessarror)
 件客体失败:', error('获取事nsole.e
    coerror) {catch (
  } 体`)gth} 个事件客ult.len ${resss(`已获取ucceessage.s  
    ElMuration)
  , dc('获取事件客体'manceMetrirforaddPe
    rtTime
    ow() - staerformance.nation = p  const dur  cts(true)
ore.getObjeionaryStwait dictt result = a cons()
   ance.now performme =tTi star
    consttry {rue
  
  lue = tg.vasLoadin => {
  isync ()jects = ast fetchOb

con
} false
  }alue =ng.vdi  isLoaly {
  
  } final事件主体失败')rror('获取.ege ElMessaor)
   :', err体失败'获取事件主or(nsole.errco
    or) {tch (err  } ca)
件主体`ength} 个事.l取 ${resultss(`已获succelMessage.  E
    
  tion)件主体', duraMetric('获取事dPerformance   
    ad
 eimtTar stce.now() -anormperf duration = 
    consttrue)Subjects(re.getionaryStodictait  awnst result =
    co()mance.nowme = perforrtTita  const s {
    
  trytrue
ue = oading.valisL=> {
  nc () asybjects =  fetchSu
}

const
  }= falsee g.valudinsLoa
    illy {
  } fina取事件类型失败')ror('获age.er   ElMess error)
 型失败:',ror('获取事件类.erole consrror) {
   catch (e事件类型`)
  } gth} 个lt.len ${resuuccess(`已获取.sessage
    ElM
    ), duration取事件类型'('获tricformanceMeddPer   
    aartTime
  ste.now() -ormancperftion = onst dura
    cue)entTypes(trStore.getEvdictionary= await onst result 
    cnow()rformance.tTime = pestarst con    try {
  
  
rueng.value = t isLoadi
  () => {s = asyncypefetchEventT
const   }
}

 false.value =sLoading    ially {
败')
  } fin典失化字ge.error('初始ssa   ElMe
 ) error',失败:字典('初始化ole.errorons   c {
 ror)ch (er化')
  } cats('字典已初始cesge.suc ElMessa)
    
   tion典', durac('初始化字triormanceMe
    addPerfme
    ) - startTi.now(erformanceion = p const durat
   ionaries()ctinitAllDiaryStore.ctionawait di
    ()nce.nowformartTime = persta const   try {
   
  
ue= tralue ing.voadsL> {
  i) = ( = asyncionariesictitD inonst典相关操作
c}

// 字se
  }
 = faling.value
    isLoadally {败')
  } fin用查询参数失rror('应ElMessage.e  rror)
  数失败:', e询参('应用查nsole.error {
    co(error)} catch 参数已应用')
  '查询uccess(ge.sMessa   El    
 uration)
('应用事件查询', dceMetricrmanrfoddPe  a
    
   - startTimermance.now() = perfost duration()
    conhEventListStore.fetcwait event
    aQuery)eventry(ore.setQueentSt)
    eve.now(anc= performme tTinst star   co
  
  try {
 e = trueoading.valu isL) => {
  = async (ryEventQue
const apply}

  }
lue = false.va isLoadinglly {
   
  } fina列表失败')or('获取事件essage.errElM)
    error:', 表失败rror('获取事件列console.e
    r) {atch (erro件`)
  } cth} 个事.lengventListre.eeventStoess(`已获取 ${ge.succssa
    ElMeion)
    件列表', durattric('获取事eMeformanc   addPer   
 tTime
 ow() - star.nnce = performadurationst  contList()
   e.fetchEveneventStor   await nce.now()
 e = performartTimtaconst s
    
  try {ue
  = trlue ng.vaisLoadi
  > {sync () =hEvents = atc作
const fe// 事件相关操}
}

  
 falseing.value =ad   isLofinally {
  } )
 ror('刷新令牌失败'lMessage.er   Eror)
 败:', er新令牌失'刷sole.error(conror) {
     } catch (er   }
 牌刷新失败')
 '令ing(arnage.wlMess
      Eelse {刷新')
    } ('令牌已uccessge.s     ElMessaesult) {
  (r
    ifion)
    ', durattric('刷新认证令牌eMePerformanc 
    adde
   tartTim) - sce.now(erformanon = ponst durati
    ction()reshTokenAceftore.r await authSlt =onst resunow()
    crmance.erfo = pt startTime{
    consry 
  
  tuevalue = tr isLoading.c () => {
 asynken = eshAuthTo
const refr
}
}se
  e = falding.valu
    isLoa {llyna } fi检查会话失败')
 rror('sage.e    ElMes error)
'检查会话失败:',e.error(sol {
    conatch (error)  }
  } c期')
  g('会话无效或已过ge.warninMessa      El{
   } else 有效')
 ess('会话uccElMessage.s     
 ) {  if (result 
  ration)
   du会话', ('检查认证MetricPerformance
    adde
    - startTimance.now()  perform duration =   conston()
 .checkSessihStoret autt = awaisul  const re
  ance.now()me = performnst startTi   co
   
  try { true
 =valueding.
  isLoa{() => ion = async thSessckAunst che作
co认证相关操}

// 
  }
 10)ce(0,lue.slitrics.vaformanceMeue = pereMetrics.valrformanc pe{
   ength > 10) cs.value.lrmanceMetri(perfo制记录数量
  if / 限
  
  / })g()
 rineTimeStocaloL.tDate()new mp: ta,
    times(duration).roundation: Mathn,
    dur    actio({
unshifts.value.rmanceMetricfo=> {
  perumber) on: nring, duratin: stric = (actiormanceMetdPerfo
const ad性能指标
}

// 添加join(', ')turn paths. 
  reak
  }
 
      breonfig'] 'cpsed',lla, 'sidebarCos = ['theme'     path':
   case 'appreak
       b']
 tioncheExpira, 'catUpdated''lasations', pes', 'locnTy 'relatio'objects',, bjects', 'suntTypes' = ['eve      pathstionary':
'dic case break
        ['query']
    paths =    vent':
   case 'e
 ak
      brehreshold']ExpiryTentok, 'oginTime'ame', 'lastLsernmemberedU, 'reions'', 'permiss'rolesnfo', userI, 'n's = ['toke   path
    'auth': case
   .value) {electedStoretch (s
  swi[] = []
  ings: str  let path
ing => { = (): strPaths getPersist路径
const取持久化
}

// 获.sizey(state)])N.stringiflob([JSOurn new B ret
  
   }    break
re }
  pSto ...apte = {
      sta 'app':    caseak
    breore }
  ctionarySt = { ...di
      statey': 'dictionarak
    case   breore }
   ntSt..eve= { .state     :
  t'evenase '   cak
 
      breuthStore }ate = { ...a':
      stth case 'au {
   e.value)selectedStorwitch (}
  
  ste: any = { let staer => {
 ): numb (ize = getStateS
const
// 获取状态大小()
}
ringcaleStoLodated).te(lastUp Daturn new
  ret知'
  d) return '未pdate!lastU
  if (}
  break
  
      lastUpdatedore. = appStUpdatedlast     'app':
  case eak
   
      brates) : nullx(...dictUpdMath.mangth > 0 ? ctUpdates.leated = di lastUpdr[]
     bes numolean) a.filter(BolastUpdated)onaryStore.ctiues(diect.valpdates = Objst dictU    con更新时间
     // 获取最新的ary':
   ictionase 'd
    ceak br    tUpdated
 entStore.lasevpdated = stU   la  
 t':e 'even   cas  break
 nTime
    re.lastLogid = authStoastUpdate':
      lase 'auth) {
    cluectedStore.va(sele
  switch ull
  = nll ber | nuum: nstUpdated let laing => {
 e = (): strdTimstUpdateonst getLa时间
c取上次更新
}

// 获uetedStore.valselecue] || re.val[selectedStorn nameMaptu  
  re'
  }
应用    app: ': '字典',
ionaryct',
    divent: '事件   e'认证',
 h: aut
    tring> = {<string, s RecordeMap:  const naming => {
): str = (ameisplayNetStoreDt g显示名称
cons

// 获取存储)}状态已重置`)
}playName(StoreDiset${ge.success(`lMessagn)
  
  Eio duratyName()}状态`,tStoreDisplaic(`重置${geformanceMetrdPer  ad // 记录性能指标

  
 - startTime.now() nceormaerfation = p  const durk
  }
  
   breaState()
   eset.rppStore  a':
    ase 'app    c break
te()
     etStaresyStore.ionar   dict   ry':
e 'dictionacas
        break)
  etState(e.resentStor      evvent':
se 'e    cak
   breae()
   tattore.resetS
      authSth': case 'aualue) {
   ore.vStselectedh (tcwi  
  sce.now()
 performan startTime =  const = () => {
t resetStorens 重置存储状态
co
}

//  } false
value =isLoading.  lly {
  } fina态失败`)
  ayName()}状eDispl刷新${getStor.error(`ageMess)
    El:', errorrror('刷新状态失败e.e    consolerror) {
tch (刷新`)
  } caName()}状态已toreDisplay${getSuccess(`Message.s  El    
   duration)
)}状态`,yName(reDisplatSto${ge刷新(`ceMetricaddPerforman     记录性能指标
 
    //e
   Tim start.now() -performanceduration = t     cons
    
eak
    }     br
   tDevice()re.detecSto     app    'app':
se
      ca break      
 ries()ionaitAllDictStore.indictionary     await    ctionary':
 'di   casek
     brea)
      t(ventListore.fetchEentS  await ev:
       'event'seak
      ca    bre)
    ckSession(heauthStore.cawait 
        se 'auth':ca      e) {
alutore.vedSect (selwitch    
    snow()
e.ormanc = perfst startTimey {
    con
  tr = true
 lue isLoading.va> {
  = async () =e shStorrefre
const / 刷新存储状态

/e'
}statlue = 'eTab.vativ {
  ac => = ()Change handleStoreonst理存储类型变更
c)

// 处 null, 2)
}ngify(state,n JSON.stri retur
 ak
  }
  }
      breobalError ng, gl globalLoadie, config,, devicarCollapsedheme, sidebe = { t
      stat appStore } =Errorg, globalglobalLoadinonfig, device, c, barCollapsedme, side { theconst      e 'app':
    cas  break
    }
d
      stUpdated: dictLadateUp        last
tLoading,ading: dic   lo
     ength,s.ltionTypeount: relaonTypesCrelati,
        lengths. objectjectsCount:       oblength,
 s.ject: subuntectsCo  subj
      ength,ventTypes.lCount: entTypes     eve {
       state =re
  ySto dictionardated } =tLastUpUpdated: dicstding, lang: dictLoas, loaditionTyperelajects, ts, ob, subjectTypesconst { even
      字典项数量   // 限制显示的
   onary':case 'dicti break
            }
ated
      lastUpd     rror,
 e     g, 
  adin lo 
           query,l, 
           totaull,
 le } : nntEvent.tit: curreid, titleent.d: currentEvent ? { irentEvvent: cururrentE     ch,
   .lengt eventListntCount:     eve    })), 
tle: e.title, ti({ id: e.ide =>  3).map(0,st.slice(Lievent: ventList
        e state = { Store
      } = eventtedlastUpdaing, error, query, loadt, total, rentEven curtList,{ evenonst      c制显示的事件数量
   // 限vent':
    
    case 'e break}
     Time stLoginrname, laberedUses, rememionles, permiss roInfo,'', user******' : n: token ? 'ke{ to    state = thStore
  au=  } stLoginTime, laameberedUserns, rememmission per roles,fo,oken, userIn  const { t
    敏感信息/ 过滤掉
      / 'auth':
    caseue) {tedStore.val (selec switch
 }
  any = {te: {
  let sta(() => edutompdState = ct formatte示
cons态显

// 格式化状toring
})anceMonirmlePerfoenabonfig.: appStore.conitoringormanceMrfPeenableon,
  mati.enableAni.configon: appStorebleAnimati
  enaheme,appStore.t
  theme: eactive({ttings = rappSe设置
const // 应用


})
  size: 10nt: 1,curre{
  active(= retQuery 
const even询参数
// 事件查g}>>([])
strinamp: mber, timest: nuon, duratingtion: striay<{ac ref<ArrnceMetrics =erforma pconstse)
f(falresLoading = )
const ite'ref('staveTab = ctist aauth')
conef('Store = redcteleconst s// 组件状态
ore()

seAppStStore = u app)
constre(naryStouseDictio = tionaryStoreconst dicntStore()
seEvetore = unst eventSre()
couthStotore = useA authS 状态存储
const
//s/app'
module@/store/rom 'ype } fmeTt { Thelus'
imporement-pfrom 'ele } ssagport { ElMe
imom '@/store'ppStore } frStore, useAeDictionaryore, us useEventStAuthStore,port { use'
imm 'vue} fronted  onMoue,d, reactivpute{ ref, commport g="ts">
i lanipt setup<scr

plate>tem  </div>
</ard>

    </el-c/div>      <
-tabs>       </el
 e></el-tab-pan        v>
          </di
    /div> <  
           ble> </el-ta          " />
     el="时间tamp" labprop="times-column <el-table             />
      0"="10width" 时(ms)bel="耗lauration" "dop=olumn pr-table-c        <el          "180" />
作" width=" label="操"actionprop=le-column -tabel  <           
     %">100"width: =ics" styleMetrperformance :data="   <el-table         </h4>
    能指标    <h4>性        >
     0"ics.length >manceMetrrforpe v-if="s"etricformance-mass="per cl      <div        
           ions>
   -descript        </el
      tions-item>ip-descrel      </          () }}
sistPathstPer      {{ ge       
     ="持久化路径">labelitem tions-ip<el-descr              -item>
  onsdescripti   </el-          ) }} 字节
   etStateSize(    {{ g        
      ="状态大小">em labelptions-itl-descri          <e
      m>ptions-ite-descri       </el     }}
     ime()UpdatedTetLast{ g      {       ">
     ="上次更新时间abel-item ltionsripsc     <el-de            border>
1"lumn="" :co监控s title="状态scriptionel-de          <">
    elnitor-panclass="mo    <div       or">
  me="monitl="监控" naane labe<el-tab-p
          l-tab-pane>      </e     </div>
          mplate>
      </te        rm>
  </el-fo             
  item>l-form-</e            
      ton>ut用设置</el-b>应s"ingpSettck="applyApmary" @cli"priton type=ut       <el-b           
  form-item>    <el-        em>
      orm-it      </el-f            ng" />
oriitnceMonmaePerforngs.enablSetti-model="app<el-switch v                能监控">
     label="启用性tem <el-form-i           
      m-item>or</el-f               on" />
   bleAnimatings.enatiel="appSeth v-mod<el-switc            >
        bel="启用动画"tem laform-i       <el-      
     -form-item>      </el      
      select></el-          
          ystem" />" value="s系统="跟随ion labelpt       <el-o         />
      rk" " value="da"暗色label=on    <el-opti                   ht" />
"lige=亮色" valun label="tioel-op    <           
       ">ings.themeappSettmodel="select v-<el-                   "主题">
  label=eml-form-it    <e        ">
      "120px-width=ellabgs" tinppSetodel="am :m<el-for              pp'">
  Store === 'a"selected-if= vemplate          <t   
          late>
     mpte     </       tton>
  -bu事件客体</elects">获取etchObjclick="fel-button @       <  n>
       utto件主体</el-b>获取事cts""fetchSubjelick=-button @c      <el        utton>
  型</el-bes">获取事件类tchEventTypfeon @click="-butt       <el
         utton>l-b/e">初始化字典<Dictionariesnit@click="itton       <el-bu       >
   tionary'"e === 'dicctedStor="seleate v-ifplem   <t           
       
        </template>           m>
  for/el-          <     tem>
 </el-form-i                  button>
</el-ry">应用ue"applyEventQck=cliy" @"primartton type=-bu         <el         item>
  l-form-        <e     
     m-item>l-for        </e  
        " /> :step="5:max="100" :min="5" ry.size"ventQuel="eber v-modeput-num    <el-in         ">
       每页数量abel="m-item l<el-for              item>
    /el-form-     <           " />
  0="10"1" :max" :min=y.current="eventQuerr v-modelt-numbel-inpu       <e             ">
页码el="em labl-form-it        <e      >
    y" inlineuertQodel="evenrm :m<el-fo           tton>
     bu表</el-ts">获取事件列"fetchEven@click=l-button <e              >
  "'event'tore === electedSte v-if="sempla          <t   
              te>
 /templa           <>
   utton牌</el-b">刷新令hAuthToken="refresutton @click <el-b           
    /el-button>sion">检查会话<SescheckAuthck="@clitton el-bu    <      
      ">auth'ore === 'ctedSt v-if="sele   <template           >
panel"tions-class="ac     <div ">
       tions"ace=操作" nambel="pane lab-el-ta     <   e>
  /el-tab-pan          <  </div>

          pre>e }}</Statmatted <pre>{{ for     
        ">-viewer"statelass= <div c  
         ">"state="状态" namee label=tab-pan     <el-b">
     eTal="activabs v-mode     <el-tent">
   e-cont="stor <div class 
     >
     div   </p>
   rou-gradio  </el-n>
      io-butto应用</el-radpp">="a labelo-button-radi<el     on>
     buttio-</el-rad>字典onary"ictibel="dn la-radio-butto         <elbutton>
 dio--raent">事件</el"evtton label=<el-radio-bu       
   -button>-radioh">认证</elut"aton label=dio-butl-ra<e         hange">
 toreCdleS"han @change=dStore"selecteel="group v-modio-l-rad <e>
       or"ore-select"stclass=v  
      <dilate>
     /tempv>
      <  </di     </div>
  >
         onutt置</el-b">重resetStore" @click="e="danger" typall size="sm <el-button         button>
  新</el->刷tore"k="refreshSic" @cllmalsize="son    <el-butt        ions">
 cts="header-alas     <div c   
  }}状态</span>e or selectedSt<span>{{
          ader">card-helass="v c   <dier>
     e #headat <templ">
     ingLoad"isding=oa" v-lcardr__tore-managelass="srd c-ca <el 
   </h3>
   tle">状态管理器-manager__tilass="store <h3 c  >
 manager"ss="store-iv clae>
  <dmplat<te